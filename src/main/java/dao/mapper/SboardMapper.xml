<?xml version="1.0" encoding="UTF-8"?>

<!-- 마이바티스 3 Mapper DTD -->
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="dao.face.SboardDao">
	<select id="selectCntAll" resultType="int">
		SELECT count(*) FROM studyboard
	</select>
	
	<select id="selectSboardHash" resultType="hashMap" parameterType="util.Paging">
		SELECT * FROM ( 
			SELECT rownum rnum, B.* FROM (
				SELECT s.study_no, s.member_no, s.study_title, s.study_people, s.study_address, s.study_tag, s.study_date, s.study_time
						,s.study_content, s.study_notify, s.enrollstudy_date, s.sboard_markcnt
						,m.member_id, m.member_nick
				FROM studyboard s
				JOIN member m ON ( s.member_no = m.member_no ) ORDER BY s.study_no DESC 
			) B
		) STUDYMBOARD
		WHERE rnum between #{startNo } AND #{endNo }
	</select>
	
	<select id="detailPageBySboardNo" resultType="hashMap" parameterType="int">
		SELECT s.study_no, s.study_title, s.study_people, s.study_address, s.study_tag, s.study_date, s.study_time, s.study_content
				, s.study_notify, s.enrollstudy_date, s.sboard_markcnt 
		FROM studyboard s
		JOIN member m ON (s.member_no = m.member_no )
		WHERE study_no = #{studyNo }
		
	</select>
 </mapper>
